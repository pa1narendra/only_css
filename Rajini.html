<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LED Board</title>
    <style>
      .led-board {
        border: 1px solid gray;
        background: linear-gradient(
          to bottom left,
          rgba(18, 18, 18, 0.8),
          #1a1a1a 30%,
          #121212 75%
        );
        padding: 16px;
        border-radius: 12px;
        position: relative;
      }
      .led-board svg {
        width: 100%;
        height: auto;
      }
      .led-board circle {
        fill: #1a1a1a;
        transition: all 200ms ease-in-out;
      }
      .led-board:hover circle {
        fill: #ff0000;
      }
      @keyframes led {
        0%,
        100% {
          fill: #1a1a1a;
        }
        50% {
          fill: #0f0;
        }
      }
      .led-board circle.animate-led {
        animation: led 2000ms ease-in-out;
      }
    </style>
  </head>
  <body>
    <div class="led-board" id="ledBoard"></div>

    <script>
      const charMap = {
        P: {
          pattern: [
            [1, 1, 1, 1],
            [1, 0, 0, 1],
            [1, 0, 0, 1],
            [1, 1, 1, 0],
            [1, 0, 0, 0],
            [1, 0, 0, 0],
          ],
          colors: [
            Array.from({ length: 6 }, () =>
              Array.from(
                { length: 5 },
                () =>
                  `#${Math.floor(Math.random() * 16777215)
                    .toString(16)
                    .padStart(6, "0")}`
              )
            ),
          ],
        },
        A: {
          pattern: [
            [0, 1, 1, 1, 0],
            [1, 0, 0, 0, 1],
            [1, 0, 0, 0, 1],
            [1, 1, 1, 1, 1],
            [1, 0, 0, 0, 1],
            [1, 0, 0, 0, 1],
          ],
          colors: [
            Array.from({ length: 6 }, () =>
              Array.from(
                { length: 5 },
                () =>
                  `#${Math.floor(Math.random() * 16777215)
                    .toString(16)
                    .padStart(6, "0")}`
              )
            ),
          ],
        },
        // Define other characters similarly with pattern and colors
        // ...
        " ": {
          pattern: [
            [0, 0],
            [0, 0],
            [0, 0],
            [0, 0],
            [0, 0],
            [0, 0],
          ],
          colors: [
            Array.from({ length: 6 }, () =>
              Array.from(
                { length: 5 },
                () =>
                  `#${Math.floor(Math.random() * 16777215)
                    .toString(16)
                    .padStart(6, "0")}`
              )
            ),
          ],
        },
        // Continue for numbers and other characters
      };

      function createMatrix(rows, cols) {
        return Array(rows)
          .fill("")
          .map(() => Array(cols).fill(false));
      }

      function createBoard(word) {
        const rows = 15;
        const wordArray = word.trim().toUpperCase().split("");
        const cols =
          wordArray
            .map(
              (char) => (charMap[char] || charMap[" "]).pattern[0].length + 1
            )
            .reduce((a, b) => a + b, 1) * 2;

        const matrix = createMatrix(rows, cols);
        const startRow = 2;
        let startCol = 2;

        for (const charIndex in wordArray) {
          const char = wordArray[charIndex];
          const charPattern = charMap[char] || charMap[" "];

          for (const rowIndex in charPattern.pattern) {
            const row = charPattern.pattern[rowIndex];
            const colors = charPattern.colors[rowIndex] || [];
            for (const colIndex in row) {
              const isLit = row[colIndex];
              if (isLit) {
                matrix[startRow + +rowIndex * 2][startCol + +colIndex * 2] =
                  colors[colIndex] || "#000000";
              }
            }
          }

          startCol += (charPattern.pattern[0].length + 1) * 2;
        }

        return {
          rows,
          cols,
          matrix,
        };
      }

      function renderBoard(word) {
        const { rows, cols, matrix } = createBoard(word);
        const svg = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "svg"
        );
        svg.setAttribute("viewBox", `0 0 ${cols - 1} ${rows}`);
        svg.classList.add("h-auto", "w-full");

        matrix.forEach((row, rowIndex) => {
          row.forEach((color, colIndex) => {
            if (rowIndex % 2 === 1 || colIndex % 2 === 1) return;

            const isLit = color !== "#000000";
            const shouldAnimate = !isHovering && isLit && Math.random() > 0.8;
            let delay = 0;
            if (shouldAnimate) {
              delay = Math.floor(Math.random() * 1000);
            }

            const circle = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "circle"
            );
            circle.setAttribute("cx", colIndex + 0.25);
            circle.setAttribute("cy", rowIndex + 0.25);
            circle.setAttribute("r", 0.25);
            circle.style.transitionDelay = !isHovering
              ? `${colIndex * 15}ms`
              : "0ms";
            circle.style.animationDuration = "2000ms";
            circle.style.animationDelay = `${delay}ms`;
            circle.classList.add(
              "transition-all",
              "duration-200",
              "ease-in-out"
            );
            if (isLit) circle.style.fill = color;
            if (shouldAnimate) circle.classList.add("animate-led");

            svg.appendChild(circle);
          });
        });

        const ledBoard = document.getElementById("ledBoard");
        ledBoard.innerHTML = "";
        ledBoard.appendChild(svg);
      }

      let isHovering = false;

      document.getElementById("ledBoard").addEventListener("mouseenter", () => {
        isHovering = true;
      });

      document.getElementById("ledBoard").addEventListener("mouseleave", () => {
        isHovering = false;
      });

      setInterval(() => {
        if (!isHovering) {
          renderBoard("PAVAN NARENDRA");
        }
      }, 3000);

      renderBoard("PAVAN NARENDRA");
    </script>
  </body>
</html>
